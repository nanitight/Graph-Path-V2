(this["webpackJsonpgraph-path"]=this["webpackJsonpgraph-path"]||[]).push([[0],{146:function(e,t,a){},226:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},359:function(e,t,a){},488:function(e,t,a){},551:function(e,t,a){},552:function(e,t,a){},553:function(e,t,a){},560:function(e,t,a){},564:function(e,t,a){},565:function(e,t,a){},567:function(e,t,a){"use strict";a.r(t);var s=a(3),r=a.n(s),n=a(28),o=a.n(n),i=(a(336),a(13)),c=a(14),d=a(18),l=a(17),j=(a(226),a(31)),h=a(60),p=(a(227),a(33)),u=a(27),b=(a(337),a(65)),g=a(589),m=a(598),f=a(75),O=a(599),v=a(614),x=a(602),k=(a(338),a(21)),w=a.n(k),y=a(51),S=(a(359),a(600));var T=function(e,t){["info","success","warning","error"].indexOf(t.toString())>0?S.a[t]({title:t.toUpperCase(),description:e,duration:3e3,placement:"topEnd"}):S.a.info({description:e,duration:3e3})},D=a(302),N=a.n(D),C=(a(488),a(213)),P=a.n(C),M=a(303),E=a(20);function A(e,t,a){if(function(e,t){return t.includes(e)}(e,t))return!0;if(!0===e.isVisit)return!1;!function(e,t){for(var a=0;a<t.length;a++)if(t[a].id===e)return void(t[a].isVisit=!0)}(e.id,a),t.push(e);for(var s=e.adjacent,r=0;r<s.length;r++)if(A(I(s[r],a),t,a))return!0;return function(e,t){for(var a=0;a<t.length;a++)t[a]===e&&(t[a]=null)}(e,t),!1}function I(e,t){for(var a=0;a<t.length;a++)if(t[a].id===e)return t[a]}var F=function(e){if("{}"===JSON.stringify(e))return console.log(),!0;if(0===e.nodes.length)return!0;for(var t=[],a=function(e){for(var t=[],a=e.edges,s=0;s<e.nodes.length;s++){var r={id:e.nodes[s].id,adjacent:[],weight:0,isVisit:!1};t.push(r)}for(var n=0;n<a.length;n++)for(var o=a[n].from,i=I(a[n].to,t),c=0;c<t.length;c++)t[c].id===o&&t[c].adjacent.push(i.id);return t}(e),s=0;s<a.length;s++)if(A(a[s],t,a))return!1;return!0},U=a(489),R=function(){function e(t){var a=this;Object(i.a)(this,e),this.graph={nodes:[],edges:[]},this.adjacencyList={},this.addVertex=function(e){a.adjacencyList[e]||(a.adjacencyList[e]=[])},this.editNodeCriticality=function(e,t){var s=a.graph.nodes.filter((function(t){return t.id===e}));return!!s.length&&(s[0].critical=t,!0)},this.createTraversableGraph=function(){a.adjacencyList={};var e=a.graph.nodes,t=a.graph.edges;if(void 0!==e&&void 0!==t){var s,r=Object(E.a)(e.map((function(e){return e.id})));try{var n=function(){var e=s.value;a.addVertex(e),a.graph.edges.filter((function(t,s){var r=Object(j.a)({},t);return r.color="#080",a.graph.edges[s]=r,t.from===e&&r})).forEach((function(t){a.addAdjacencyEdge(e,t.to)}))};for(r.s();!(s=r.n()).done;)n()}catch(o){r.e(o)}finally{r.f()}}},this.pathFromBFS=function(e){a.createTraversableGraph();var t,s=[e],r=[],n=[],o={};for(o[e]=!0;s.length;)if(void 0!==(t=s.shift())){console.log("curr",t);var i=a.graph.nodes.find((function(e){return e.id===t}));void 0!==i&&i.critical&&(i.color="#880",r.push(i.id)),n.push(t),a.adjacencyList[t].forEach((function(e){o[e]||(o[e]=!0,s.push(e))}))}return{paths:r,result:n}},this.findShortestPath=function(e){var t=a.graph.nodes.length,s=new U.WeightedDiGraph(t);if(void 0!==s){var r,n=Object(E.a)(a.graph.edges);try{for(n.s();!(r=n.n()).done;){var o=r.value,i=parseInt(o.from.substr(1,o.from.length-1)),c=parseInt(o.to.substr(1,o.to.length-1));s.addEdge(new U.Edge(i,c,10))}}catch(j){n.e(j)}finally{n.f()}var d=parseInt(e.substr(e.length-1)),l=new U.Dijkstra(s,0);return l.hasPathTo(d)?l.pathTo(d):[]}},this.findFromTraversable=function(){var e=Object(M.a)(P.a.mark((function e(t){var s,r,n,o,i,c,d,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=[],r=!1,n=["n0"],o=[];!1===r&&n.length;)if(i=n.shift(),o.push(i),a.adjacencyList[i].indexOf(t)>=0)r=!0,s.push(t);else{c=Object(E.a)(a.adjacencyList[i]);try{for(c.s();!(d=c.n()).done;)l=d.value,o.indexOf(l)<0&&n.push(l)}catch(j){c.e(j)}finally{c.f()}console.log("push",i),s.push(i)}if(!r){e.next=9;break}return e.abrupt("return",s);case 9:return e.abrupt("return",["n0"]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.pathFromDFS=function(e){a.createTraversableGraph();for(var t={},s=0,r=Object.keys(a.adjacencyList);s<r.length;s++){var n=r[s];t[n]=!1}var o=[],i=[];i.push(e);for(var c=[],d=function(){var s=i.pop();if(void 0!==s){if(!1===t[s])if(c.push(s),t[s]=!0,void 0===(l=a.graph.nodes.find((function(e){return e.id===s})))||l.critical){for(var r=c.pop(),n=[];r!==e;)n.unshift(r),r=c.pop();n.unshift(e),o.push(n),c.push(e)}else;var d,j=Object(E.a)(a.adjacencyList[s]);try{for(j.s();!(d=j.n()).done;){var h=d.value;t[h]||i.push(h)}}catch(p){j.e(p)}finally{j.f()}}};0!==i.length;){var l;d()}return o},this.highlightGraphCritical=function(){var e=a.pathFromBFS("n0"),t=e.paths,s=[];if(t.length){var r,n=Object(E.a)(t);try{for(n.s();!(r=n.n()).done;){var o=r.value,i=a.findShortestPath(o);s.push(i)}}catch(c){n.e(c)}finally{n.f()}return a.changeEdgeColor(s,"#880"),s.length}return e.result.length>1?s.length:-1},this.removeEdge=function(e,t){a.adjacencyList[e]=a.adjacencyList[e].filter((function(e){return e!==t}))},this.removeVertex=function(e){for(;a.adjacencyList[e];){var t=a.adjacencyList[e].pop();a.removeEdge(e,t)}delete a.adjacencyList[e]},this.changeColor=function(e,t){var s=a.graph.nodes;if(s&&Array.isArray(s)){var r=-1,n=s.find((function(t,a){if(t.id===e)return r=a,t}));if(n&&r>=0)return n.color=t,s.splice(r,1,n),a.graph.nodes=s,1}return 0},this.changeEdgeColor=function(e,t){var s=a.graph.edges;if(Array.isArray(s)){var r,n=Object(E.a)(e);try{for(n.s();!(r=n.n()).done;){var o,i=r.value,c=Object(E.a)(i);try{var d=function(){var e=o.value;s.find((function(t){return t.from==="n".concat(e.from())&&t.to==="n".concat(e.to())})).color=t};for(c.s();!(o=c.n()).done;)d()}catch(l){c.e(l)}finally{c.f()}}}catch(l){n.e(l)}finally{n.f()}}},this.setGraph=function(e){console.log("MGR set old:",a.graph,"new:",e),Array.isArray(e.nodes)&&Array.isArray(e.edges)?a.graph=e:a.graph={nodes:[],edges:[]}},this.getGraph=function(){return a.graph},this.addEdge=function(e,t){var s=1,r=!1,n=a.graph.edges.map((function(a){return a.from===e&&a.to===t&&(r=!0),a.id}));if(!0===r)return 2;for(;n.indexOf("e".concat(s))>=0;)s+=1;var o={id:"e".concat(s),from:e,to:t,label:"".concat(e," to ").concat(t),color:"#000",width:7},i=a.graph.nodes.find((function(t){return t.id===e})),c=a.graph.nodes.find((function(e){return e.id===t}));return void 0!==i&&void 0!==c&&(o.label="".concat(i.label," to -> ").concat(c.label)),a.graph.edges.push(o),F(a.graph)?1:(a.graph.edges.pop(),0)},this.removeNode=function(e){var t=a.graph.nodes.filter((function(t){return t.id!==e}));if(a.graph.nodes.length===t.length)return!1;var s={nodes:[],edges:[]};if(s.nodes=t,a.graph.edges.length>0){var r=a.graph.edges.filter((function(t){return t.from!==e&&t.to!==e}));return s.edges=r,a.graph=s,!0}return a.graph=s,!0},this.removeEdgeWithEdgeId=function(e){var t=a.graph.edges.filter((function(t){return t.id!==e}));return a.graph.edges.length!==t.length&&(a.graph.edges=t,!0)},this.addNode=function(e){var t=a.graph,s={label:e.label,size:20,critical:e.critical},r=t.nodes.length;if(r>0){for(var n=1,o=a.graph.nodes.map((function(e){return e.id}));o.indexOf("n".concat(n))>=0;)n+=1;s.id="n".concat(n),s.color="#f00000",r%2===0?(s.x=2*r,s.y=-2*r):(s.x=2*r,s.y=15*r)}else{var i=Object(j.a)({},s);s.id="n1",s.color="#ea0000",s.x=0,s.y=0,i.id="n0",i.color="#900",i.x=0,i.y=-160,i.critical=!1,i.label="Start",a.graph.nodes.push(i)}a.graph.nodes.push(s)},this.updatePosition=function(e,t,s){var r=-1,n=a.graph.nodes.find((function(t,a){if(t.id===e)return r=a,t}));return n&&r>=0?(n.x=t,n.y=s,a.graph.nodes[r]=n,1):0},void 0===t||void 0===t.nodes||void 0===t.edges?this.setGraph({}):this.graph=t,this.adjacencyList={}}return Object(c.a)(e,[{key:"addAdjacencyEdge",value:function(e,t){this.adjacencyList[e]||this.addVertex(e),this.adjacencyList[e].indexOf(t)<0&&this.adjacencyList[e].push(t)}},{key:"showNodeList",value:function(){var e=this.graph.nodes;e.length<=0||console.log("".concat(e.length," Nodes"))}}]),e}(),_=a(587),V=a(613),L=a(609),B=a(580),G=a(606),z=a(596),q=a(326),H=a(150),Y=a(327),K=a(2),W=a.n(K),J=a(608),Q=a(607),X=a(595),Z=a(584),$=a(610),ee=a(611),te=a(601),ae=a(612),se=a(328),re=a(4),ne=["name","message","label","accepter","error"],oe=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.message,s=e.label,r=e.accepter,n=e.error,o=Object(se.a)(e,ne);return Object(re.jsxs)(B.a,{className:n?"has-error":"",children:[Object(re.jsxs)(G.a,{children:[s," "]}),Object(re.jsx)(z.a,Object(j.a)({name:t,accepter:r,errorMessage:n},o)),Object(re.jsx)(Q.a,{children:a})]})}}]),a}(r.a.PureComponent),ie=(a(146),a(594)),ce=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).now=new Date,s.DateType=J.a.Types.DateType,s.StringType=J.a.Types.StringType,s.dueDate=new Date(s.now.getFullYear()),s.minDate=new Date(s.now.getFullYear(),s.now.getMonth(),s.now.getDate()-1),s.taskModel=J.a.Model({description:s.StringType().minLength(5,"Please add more details on the description").isRequired("This field is required."),issued:s.DateType().min(s.minDate,"The issued date cannot be set to a date that has passed.").isRequired("This field is required."),due:s.DateType().min(s.dueDate,"The due date cannot be set to a date that has passed.").isRequired("This field is required.")}),s.handleTaskCreation=function(e,t){console.log("Form ",e),s.setState({formValue:e})},s.handleTaskErrors=function(e){s.setState({formError:e})},s.handleTaskSubmit=function(){var e=s.state.formValue;if(s.form.check()){var t=Object(j.a)({},e);if(e.due instanceof Date){var a=Object(ie.a)(t.due,"yyyy-MM-dd");t.due=a}if(e.issued instanceof Date){var r=Object(ie.a)(t.issued,"yyyy-MM-dd");t.issued=r}if(console.log("selected submit",t),void 0===s.state.editTask.nodeID)s.props.sendTaskInfo(t),s.setState({newTask:!s.state.newTask});else{var n=Object.assign(s.state.editTask,t);s.props.updateNode(n),s.switchToEditTask({})}}else console.log("Form error")},s.getDefaultFormState=function(){return{description:"",issued:new Date(s.now.getFullYear(),s.now.getMonth(),s.now.getDate()).toJSON().slice(0,10),due:new Date(s.now.getFullYear(),s.now.getMonth()+1,s.now.getDate()).toJSON().slice(0,10),status:"not started",taskMembers:[]}},s.toogleScreen=function(){var e=s.getDefaultFormState();s.setState({newTask:!s.state.newTask,formValue:e,formError:{},editTask:{}})},s.switchToEditTask=function(e){console.log("selected for edit",e);var t=Object(j.a)({},s.state.formValue);void 0!==e.nodeID?(t.description=e.description,t.due=e.due,t.taskMembers=e.taskMembers,t.status=e.status):t=s.getDefaultFormState(),s.setState({editTask:e,formValue:t})},s.handleSortChange=function(e){s.setState({newStatus:e})},s.createNewTask=function(){var e=s.state,t=e.formError,a=e.formValue;return Object(re.jsx)("div",{children:Object(re.jsxs)(L.a,{formValue:a,model:s.taskModel,ref:function(e){return s.form=e},onCheck:function(e){return s.handleTaskErrors(e)},onChange:s.handleTaskCreation,children:[Object(re.jsxs)(B.a,{"data-testid":"filter-input-description",children:[Object(re.jsx)(G.a,{children:"Description"}),Object(re.jsx)(z.a,{name:"description",placeholder:"Task Description"}),Object(re.jsx)(Q.a,{tooltip:!0,children:"Required"})]}),Object(re.jsx)(oe,{accepter:X.a,name:"issued",label:"Start Date",oneTap:!0,error:t.issued}),Object(re.jsx)(oe,{accepter:X.a,name:"due",label:"Due Date",error:t.due,oneTap:!0}),Object(re.jsxs)(oe,{name:"status",label:"Status",accepter:Z.a,inline:!0,children:[Object(re.jsx)($.a,{className:"not-started",value:"not started",children:"Not Started"}),Object(re.jsx)($.a,{className:"in-prog",value:"in progress",children:"In Progress"}),Object(re.jsx)($.a,{className:"complete",value:"complete",children:"Complete"})]}),Object(re.jsx)(B.a,{children:Object(re.jsx)(b.a,{"data-testid":"btn1",onClick:s.handleTaskSubmit,children:"Submit"})})]})})},s.listAllTasks=function(){if(s.props.nodeTasks){if(void 0!==s.state.editTask.status){var e=s.state.editTask,t=s.props.members.map((function(e){return{label:e.email,value:e.email}})),a=s.state,r=a.formError,n=a.formValue;return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(ee.a,{bordered:!0,header:"Edit Task ",children:[Object(re.jsxs)("p",{children:[" ",Object(re.jsxs)(b.a,{onClick:function(){return s.switchToEditTask({})},children:[Object(re.jsx)(f.a,{icon:"close"})," Cancel"]})]}),Object(re.jsxs)("small",{children:[Object(re.jsx)("b",{children:"Issued"})," : ",e.issued," ",Object(re.jsx)("br",{}),Object(re.jsxs)(L.a,{formValue:n,model:s.taskModel,ref:function(e){return s.form=e},onCheck:function(e){return s.handleTaskErrors(e)},onChange:s.handleTaskCreation,children:[Object(re.jsxs)(B.a,{children:[Object(re.jsx)(G.a,{children:"Description"}),Object(re.jsx)(z.a,{name:"description",placeholder:"Task Description"}),Object(re.jsx)(Q.a,{tooltip:!0,children:"Required"})]}),Object(re.jsx)(oe,{accepter:X.a,name:"due",label:"Due Date",error:r.due,oneTap:!0,format:"YYYY-MM-DD"}),Object(re.jsx)(oe,{name:"status",label:"Status",accepter:x.a,inline:"true",data:[{label:"Not Started",value:"not started"},{label:"In Progress",value:"in progress"},{label:"Complete",value:"complete"}]}),Object(re.jsx)(oe,{name:"taskMembers",label:"Assign Task To Project Member",accepter:te.a,inline:"true",data:t})]}),Object(re.jsx)("br",{})]}),Object(re.jsxs)(b.a,{onClick:s.handleTaskSubmit,children:[Object(re.jsx)(f.a,{icon:"save",spin:!0}),"Save Changes"]})]})})}return Array.isArray(s.props.nodeTasks)&&s.props.nodeTasks.length>0?Object(re.jsx)(ae.a,{accordion:!0,bordered:!0,children:s.props.nodeTasks.map((function(e){return Object(re.jsxs)(ee.a,{bordered:!0,header:"Description : ".concat(e.description," "),children:[Object(re.jsxs)("small",{children:[Object(re.jsx)("b",{children:"Issued"})," : ",e.issued," ",Object(re.jsx)("br",{}),Object(re.jsx)("b",{children:"Due-Date"})," : ",e.due," ",Object(re.jsx)("br",{}),Object(re.jsx)("b",{children:"Status "}),": ",e.status,Object(re.jsx)("br",{})]}),Object(re.jsxs)(b.a,{onClick:function(){return s.props.deleteTask(e._id)},children:[" ",Object(re.jsx)(f.a,{icon:"trash"})]}),Object(re.jsxs)(b.a,{onClick:function(){return s.switchToEditTask(e)},children:[Object(re.jsx)(f.a,{icon:"pencil-square"}),"Edit Task"]})]},e._id)}))}):Object(re.jsx)("small",{children:"No Tasks Provided, Please add new tasks"})}return Object(re.jsx)(re.Fragment,{children:"No Props Provided"})},s.deleteAll=function(){var e=s.props.nodeTasks;if(e)if(e.length>0){var t=e[0];s.props.deleteNodeTasks(t.nodeID)}else alert("no task to delete")},s.state={assignee:[],assigner:{},newTask:!1,editTask:{},newStatus:"not started",formValue:{description:"",issued:new Date(s.now.getFullYear(),s.now.getMonth(),s.now.getDate()).toJSON().slice(0,10),due:new Date(s.now.getFullYear(),s.now.getMonth()+1,s.now.getDate()).toJSON().slice(0,10),status:"not started",taskMembers:[]},formError:{}},s}return Object(c.a)(a,[{key:"render",value:function(){return Object(re.jsxs)("div",{id:"tidTask","data-testid":"tidTask",children:[Object(re.jsxs)("div",{children:[Object(re.jsx)(b.a,{onClick:this.toogleScreen,appearance:"ghost",children:this.state.newTask?"Close":"ADD TASK"})," | ",Object(re.jsx)(b.a,{onClick:this.deleteAll,appearance:"subtle",children:"DELETE ALL TASKS"})]}),Object(re.jsx)("div",{children:this.state.newTask?this.createNewTask():this.listAllTasks()})]})}}]),a}(r.a.Component);ce.propType={nodeTasks:W.a.array.isRequired,members:W.a.array.isRequired,sendTaskInfo:W.a.func.isRequired,deleteTask:W.a.func.isRequired,deleteNodeTasks:W.a.func.isRequired};var de=ce,le=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).graphManager=null,s.initialGraph={},s.viewAllTasksForProject=function(e){if(void 0!==s.props.project){s.setState({loading:!0});var t=s.props.project._id;w.a.get("".concat(s.props.api,"/task/getAllTasksByProject/").concat(t)).then((function(t){console.log("Tasklist",t);var a=t.data.data;void 0!==a&&Array.isArray(a)?s.setState({taskList:t.data.data,loading:!1,showTask:!1},(function(){"function"===typeof e&&e()})):s.setState({loading:!1})})).catch((function(e){console.log("Error",e),s.setState({loading:!1})}))}else s.setState({loading:!1})},s.showNodeForm=function(){s.setState({showNode:!s.state.showNode})},s.filterByID=function(e,t){return t.filter((function(t){return t.nodeID===e}))},s.showTaskModal=function(e){var t=s.state.nodeTasks;if("string"===typeof e&&e.length>1&&void 0!==s.props.project){t=s.filterByID("".concat(s.props.project._id,"_").concat(e),s.state.taskList);var a=s.state.currGraph.nodes.find((function(t){return t.id===e})),r="No Provided Name";a&&(r=a.label),s.setState({showTask:!s.state.showTask,nodeTasks:t,currNodeID:e,currNodeName:r})}else s.setState({showTask:!s.state.showTask,currNodeId:"",currNodeName:"",nodeTask:[]})},s.handleChange=function(e){s.setState({nodeName:e})},s.handleCritical=function(e){s.setState({critical:!s.state.critical})},s.updateGraph=function(e){s.setState({currGraph:s.graphManager.getGraph()},(function(){e&&s.saveProjectGraph(s.props.project._id)}))},s.addNewNode=function(){var e={label:s.state.nodeName,critical:s.state.critical};e.label.toString().trim().length?(s.graphManager.setGraph(s.state.currGraph),s.graphManager.addNode(e),s.updateGraph(),s.cleanUpAfterNodeAddition()):T("Cannot Submit Empty Name","error")},s.createEdgeBetweenNode=function(e){if("from"===s.state.source)s.setState({source:e});else{if(s.state.source===e)T("Cannot make edge to self","error");else{var t=s.graphManager.addEdge(s.state.source,e);1===t?s.updateGraph():0===t?T("Edge Makes graph Cyclic","Error"):T("Edge Exists","warning")}s.cleanUpAfterEdgeAddition()}},s.removeNode=function(e){var t=s.graphManager.removeNode(e);return t&&(s.updateGraph(),s.deleteAllNodeTask("".concat(s.props.project._id,"_").concat(e))),t},s.removeEdge=function(e){s.graphManager.removeEdgeWithEdgeId(e)?s.updateGraph():console.log("Error when deleting edge")},s.cleanUpAfterEdgeAddition=function(){s.setState({source:"from",target:"to"})},s.cleanUpAfterNodeAddition=function(){s.setState({nodeName:"",critical:!1})},s.validateGraphDifference=function(e,t){var a=!1;return console.log("finding diff b/w",e,"and:",t),void 0===t||void 0===t.nodes||void 0===t.edges?a:void 0===e?a=!0:void 0===e.nodes||void 0===e.edges||void 0===e?(a=!0,!0):JSON.stringify(e)!==JSON.stringify(t)?a=!0:a},s.checkSavePermissions=function(){void 0!==s.props.project&&s.saveProjectGraph(s.props.project._id)},s.saveProjectGraph=function(e){if(s.validateGraphDifference(s.initialGraph,s.state.currGraph)){s.setState({loading:!0});var t={nodes:s.state.currGraph.nodes.map((function(e){return{id:e.id,label:e.label,x:e.x,y:e.y,size:e.size,color:e.color,critical:e.critical}})),edges:s.state.currGraph.edges.map((function(e){return{id:e.id,from:void 0===e.source?e.from:e.source,to:void 0===e.target?e.to:e.target,label:e.label,color:e.color,width:e.width}}))},a={};a.graph=t,a.projectID=e,a.email=s.props.loggedUser.email,console.log("b4",a),w.a.patch("".concat(s.props.api,"/project/updateProjectGraph"),a,{headers:{authorization:s.props.loggedUser.token}}).then((function(e){console.log("update graph response",e.data),s.setState({loading:!1,answer:e.data.message}),T(e.data.message,"info"),s.initialGraph=t})).catch((function(e){e.response?(console.log(e.response),T(e.response.data.message,"error")):console.log("Some error",e),s.setState({loading:!1})}))}else T("No change to graph","warning")},s.saveNodeTask=function(e){var t=Object(j.a)({},e),a=s.props.project;t.projectID=a._id,t.nodeID="".concat(a._id,"_").concat(s.state.currNodeID),t.assigner=[{email:"".concat(s.props.loggedUser.email),permissions:["owner"]}],t.email=s.props.loggedUser.email,t.taskMembers=[];var r=s.state.currNodeName;if(r.length<1){var n=s.state.currGraph.nodes.find((function(e){return e.id===s.state.currNodeID}));t.title=n.label}else t.title=r;console.log("saving",t),s.setState({loading:!0}),w.a.post("".concat(s.props.api,"/task/insertTask"),t,{headers:{authorization:s.props.loggedUser.token}}).then((function(e){var a=e.data;if(console.log("saved task",a),a.data){var r="";a.data.errors?T(a.message,"error"):(r=t.nodeID.split("_")[1],console.log("updated id",r,a.nodeCompletionStatus),T(a.message,"success"),s.changeNodeByStats(r,a.nodeCompletionStatus)),s.viewAllTasksForProject()}else T(a.message,"info"),s.setState({loading:!1})})).catch((function(e){e.response?(console.log(e.response),T(e.response.data.message,"warning")):(T("Something went wrong,please try again","info"),console.log("Some error",e)),s.setState({loading:!1})}))},s.clickNodeHandler=function(e){var t=e.data.node.id;e.data.captor.altKey?"string"===typeof t&&s.removeNode(t):e.data.captor.ctrlKey||e.data.captor.shiftKey?"string"===typeof t&&s.createEdgeBetweenNode(t):("string"===typeof t&&s.showTaskModal(t),s.cleanUpAfterEdgeAddition())},s.deleteOneTask=function(e){window.confirm("Are you sure you want to delete all tasks?")?w.a.delete("".concat(s.props.api,"/task/deleteTaskByID/").concat(e),{data:{projectID:s.props.project._id,email:s.props.loggedUser.email},headers:{authorization:s.props.loggedUser.token}}).then((function(e){T(e.data.message,"info"),s.viewAllTasksForProject()})).catch((function(e){e.response&&(console.log("Detailed err:",e.response),T(e.response.data.message,"info")),console.log("some error",e)})):T("Task not deleted","info")},s.deleteAllNodeTask=function(e){window.confirm("Are you sure you want to delete all tasks?")?w.a.delete("".concat(s.props.api,"/task/deleteTaskByNodeID/").concat(e),{data:{projectID:s.props.project._id,email:s.props.loggedUser.email},headers:{authorization:s.props.loggedUser.token}}).then((function(e){T(e.data.message,"info"),s.viewAllTasksForProject()})).catch((function(e){e.response&&console.log("Detailed err:",e.response),console.log("some error",e)})):T("All tasks not deleted","info")},s.updateNode=function(e){e.taskID=e._id,console.log("updated ",e),w.a.patch("".concat(s.props.api,"/task/updateEverythingTask"),e,{headers:{authorization:s.props.loggedUser.token}}).then((function(t){console.log("update res",t);var a=e.nodeID.split("_")[1];console.log("updated id",a),T(t.data.message,"info"),s.changeNodeByStats(a,t.data.nodeCompletionStatus)})).catch((function(e){e.response&&console.log("err msg",e.response)}))},s.newTaskModal=function(){return Object(re.jsxs)(_.a,{show:s.state.showTask,keyboard:!0,onHide:s.showTaskModal,overflow:!0,backdrop:!0,children:[Object(re.jsx)(_.a.Header,{children:Object(re.jsxs)(_.a.Title,{children:["Provided tasks - ","Node: "+s.state.currNodeName]})}),Object(re.jsx)(_.a.Body,{children:Object(re.jsx)(de,{nodeTasks:s.state.nodeTasks,members:s.props.project.groupMembers,deleteNodeTasks:s.deleteAllNodeTask,deleteTask:s.deleteOneTask,updateNode:s.updateNode,sendTaskInfo:s.saveNodeTask})})]})},s.state={currGraph:{},showTask:!1,nodeName:"",critical:!1,showNode:!1,loading:!1,showMsg:!1,answer:"",source:"from",target:"to",taskList:[],nodeTasks:[],currNodeID:"",currNodeName:""},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.project.graph,t=JSON.parse(JSON.stringify(e));void 0!==e?(this.initialGraph=t,this.graphManager=new R(e),this.setState({currGraph:this.graphManager.getGraph()})):console.log("No Graph Object Mounted"),this.viewAllTasksForProject()}},{key:"componentWillUnmount",value:function(){var e=this.props.project;null!==this.graphManager&&(e.graph=this.graphManager.getGraph(),delete this.graphManager),this.props.updateParent(e),console.log("update parent",e)}},{key:"changeNodeByStats",value:function(e,t){var a="#000";a=t>=.9?"#0d0":t>=.5?"#dd0":"#d00";var s=this.graphManager.changeColor(e,a);console.log("change color",s),s?this.updateGraph(!0):T("Could not change node color","info")}},{key:"render",value:function(){var e=this;if(console.log(" graph",this.state.currGraph),null!==this.graphManager){var t=this.state.currGraph;console.log("curr",this.graphManager);var a=Object(re.jsx)(V.a,{visible:this.state.showNode,title:"ADD NODE TO GRAPH",children:Object(re.jsxs)(L.a,{onSubmit:this.addNewNode,"data-testid":"form",children:[Object(re.jsxs)(B.a,{children:[Object(re.jsx)(G.a,{children:" Node Name"}),Object(re.jsx)(z.a,{name:"node",type:"text",value:this.state.nodeName,onChange:this.handleChange})]}),Object(re.jsx)(B.a,{children:Object(re.jsx)(q.a,{checked:this.state.critical,onChange:this.handleCritical,children:"Critical Node ?"})}),Object(re.jsx)(B.a,{children:Object(re.jsx)(z.a,{type:"submit"})})]})}),s={layout:{randomSeed:void 0,improvedLayout:!0,clusterThreshold:150},nodes:{physics:!1,shape:"box",font:{color:"#343434",size:30,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center"}},edges:{color:"#ff0000",physics:!1,font:"false",arrowStrikethrough:!1,arrows:{to:{enabled:!0,imageHeight:30,type:"arrow"}}}},r={select:function(e){e.nodes,e.edges;console.log("sel",e)}};return r.externalDragUpdate=this.graphManager.updatePosition,r.dragEnd=function(e){console.log("drag",e);var t=e.nodes;if(t.length>0){var a=t.shift(),s=e.pointer.canvas,n=s.x,o=s.y,i=r.externalDragUpdate(a,n,o);console.log("update",i)}},r.externalRemoveNode=this.removeNode,r.externalRemoveEdge=this.removeEdge,r.externalCreateEdge=this.createEdgeBetweenNode,r.viewTaskInfo=this.showTaskModal,r.click=function(e){console.log("clicked",e,"ctrl",e.event.srcEvent.ctrlKey);var t=e.nodes,a=e.edges;if(e.event.srcEvent.altKey){if(t.length>0){var s=t.shift();r.externalRemoveNode(s)}else if(a.length>0){var n=a.shift();r.externalRemoveEdge(n)}}else if(e.event.srcEvent.ctrlKey||e.event.srcEvent.shiftKey){if(t.length>0){var o=t.shift();r.externalCreateEdge(o)}}else if(t.length>0){var i=t[0];r.viewTaskInfo(i)}},Object(re.jsxs)("div",{children:[this.state.loading&&Object(re.jsx)(v.a,{backdrop:!0,speed:"fast",size:"lg"}),Object(re.jsxs)("div",{id:"graph-info",children:[Object(re.jsx)("h3",{children:this.props.project.projectName}),Object(re.jsxs)("div",{id:"graph-nav",children:[Object(re.jsx)(H.a,{speaker:a,placement:"leftStart",trigger:"active",children:Object(re.jsx)(b.a,{children:"Add Node"})})," \xa0",Object(re.jsx)(Y.a,{onClick:function(){return e.checkSavePermissions()},title:"Save Graph",icon:Object(re.jsx)(f.a,{icon:"save"})}),Object(re.jsx)(Y.a,{icon:Object(re.jsx)(f.a,{icon:"charts-line"}),children:"Project Graph Critical Path"})]})]}),Object(re.jsxs)("div",{id:"graphbox",children:[this.newTaskModal(),Object(re.jsx)(N.a,{graph:this.state.currGraph,options:s,events:r,getNetwork:function(e){e.stabilize(2e3)}},JSON.stringify(t))]})]})}return Object(re.jsx)("div",{children:"Something Wrong"})}}]),a}(s.Component);le.defaultProps={api:"http://localhost:9001"};var je=Object(y.b)((function(e){return{loggedUser:e.loggedUser}}))(Object(u.h)(le)),he=a(605),pe=a(34),ue=(a(551),a(603)),be=a(615),ge=a(604),me=a(588),fe=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleViewMembers=function(){s.setState({show:!s.state.show})},s.showAddMembers=function(){s.setState({showModal:!0})},s.handleAddMembers=function(e){if(e.preventDefault(),console.log("submitted",s.state),s.state.memberName.length>5){var t={email:s.props.user.email,projectID:s.props.project._id,groupMembers:[{email:s.state.memberName,role:"Developer",permissions:s.state.value}]};s.setState({showModal:!1,value:[]}),s.addMember(t)}else if(s.state.projectMembers.length>0){var a={email:s.props.user.email,projectID:s.props.project._id,groupMembers:[]};s.state.projectMembers.map((function(e,t){return a.groupMembers[t]={email:e,role:"Developer",permissions:s.state.value}})),console.log("p members",a),s.setState({showModal:!1,value:[]}),s.addMember(a)}else T("Provide Email","warning")},s.addMember=function(e){console.log("submitted sent",e);try{w.a.post("".concat(s.state.api,"/project/addToProjectGroupMembers/"),e,{headers:{authorization:s.props.user.token}}).then((function(e){console.log("add member response",e.data);var t=e.data;s.setState({answer:t.message},(function(){void 0!==s.state.answer?T("Member Added","success"):alert("Something went wrong please update again ")}))}),(function(e){console.log("rejected",e),alert("Server Error, Please try again later")}))}catch(t){t.response.data&&console.log(t.response.data),console.log(t)}},s.addMemberModal=function(){s.setState({showModal:!0,editMember:!1})},s.enableEdit=function(){s.setState({disabled:!s.state.disabled})},s.onSubmit=function(e){e.preventDefault(),console.log("submitted",s.state);var t=Object.assign(s.props.project,{projectID:s.props.project._id,owner:s.props.project.projectOwner,email:s.props.user.email});""===s.state.projName||(t.projectName=s.state.projName),""===s.state.projDescription||(t.projectDescription=s.state.projDescription),""===s.state.startD||(t.startDate=s.state.startD),""===s.state.dueD||(t.dueDate=s.state.dueD),s.sendData(t),console.log("data send",t),s.setState({disable:!0})},s.sendData=function(e){console.log("token",s.props.user);try{w.a.put("".concat(s.state.api,"/project/updateEverythingProject/"),e,{headers:{authorization:s.props.user.token}}).then((function(e){console.log("update project response",e.data);var t=e.data;s.setState({answer:t.message},(function(){void 0!==s.state.answer?T("Project Updated","success"):alert("Something went wrong please update again ")}))}),(function(e){console.log("rejected",e),alert("Server Error, Please try again later")}))}catch(t){t.response.data&&console.log(t.response.data),console.log(t)}},s.removeMember=function(e){console.log("email",e);var t={projectID:s.props.project._id,email:e};try{w.a.patch("".concat(s.state.api,"/project/removeProjectMember/"),t,{headers:{authorization:s.props.user.token}}).then((function(e){if(400===e.status)throw Error(e.statusText);var t=e.data;s.setState({answer:t.message},(function(){void 0!==s.state.answer?T("Member Removed","success"):alert("something went wrong please remove again")}))}),(function(e){console.log("rejected",e),alert("Server Error, Please try again later")})).then((function(){}))}catch(a){console.log(a)}},s.handleEditRole=function(e){var t=0;s.props.project.groupMembers.map((function(a,s){a.email===e?t=s:re.Fragment})),console.log("index",t),s.setState({editMember:!0,showModal:!0,MemberEditEmail:e,value:s.props.project.groupMembers[t].permissions}),console.log("edit role",e)},s.handleCloseEdit=function(){s.setState({editMember:!1,showModal:!1,value:[]})},s.updateRole=function(){s.props.project.groupMembers.map((function(e,t){e.email===s.state.MemberEditEmail?s.props.project.groupMembers[t].permissions=s.state.value:re.Fragment})),s.setState({editMember:!1,showModal:!1,value:[]});var e=Object.assign(s.props.project,{projectID:s.props.project._id,owner:s.props.project.projectOwner,email:s.props.user.email});e.groupMembers=s.props.project.groupMembers,console.log("data-gr",e),s.sendData(e)},s.change=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value;s.setState(Object(pe.a)({},a,r))},s.getAllUsers=function(){try{w.a.get("".concat(s.state.api,"/user/listOfAllUsers/"),{headers:{authorization:s.props.user.token}}).then((function(e){if(400===e.status)throw Error(e.statusText);var t=e.data.data;console.log("all members",t),s.setState({allMembersFromDb:t})}),(function(e){console.log("rejected",e),alert("Server Error, Please try again later")})).then((function(){}))}catch(e){console.log(e)}},s.saveMember=function(e){s.setState({projectMembers:e})},s.state={show:!1,showModal:!1,disabled:!0,projName:"",projectOwner:"",startD:"",dueD:"",projDescription:"",api:"http://localhost:9001",answer:"",editMember:!1,MemberEditEmail:"",value:[],memberName:"",allMembersFromDb:void 0,projectMembers:[]},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAllUsers()}},{key:"render",value:function(){var e=this,t=this.props.project;this.state.formValue;return console.log("proj",t),Object(re.jsxs)("div",{"data-testid":"main-div-id",id:"main-div",children:[Object(re.jsx)("div",{id:"project-name",children:Object(re.jsx)("h3",{children:t.projectName})}),Object(re.jsx)("div",{id:"project-information",children:Object(re.jsxs)("form",{"data-testid":"form-test-id",className:"profileForm",onSubmit:this.onSubmit,children:[Object(re.jsx)("label",{children:"Project Name"}),Object(re.jsx)("input",{defaultValue:t.projectName,disabled:!!this.state.disabled,onChange:this.change,type:"text",name:"projName",required:!0}),Object(re.jsx)("label",{children:"Project Owner"}),Object(re.jsx)("input",{value:t.projectOwner,disabled:!0,type:"text"}),Object(re.jsx)("label",{children:"Project Description"}),Object(re.jsx)("input",{defaultValue:t.projectDescription,disabled:!!this.state.disabled,onChange:this.change,name:"projDescription",type:"text",required:!0}),Object(re.jsx)("label",{children:"Start Date"}),Object(re.jsx)("input",{type:"date",name:"startD",defaultValue:t.startDate,onChange:this.change,disabled:!!this.state.disabled,required:!0}),Object(re.jsx)("label",{children:"Due Date"}),Object(re.jsx)("input",{defaultValue:t.dueDate,type:"date",name:"dueD",onChange:this.change,disabled:!!this.state.disabled,required:!0}),!0===t.permissions.includes("update all project")||t.permissions.includes("owner")?this.state.disabled?Object(re.jsx)(b.a,{id:"btn-form",disabled:!this.state.disabled,onClick:this.enableEdit,children:"Edit"}):Object(re.jsx)("input",{className:"rs-btn rs-btn-default",id:"btn-form",type:"submit",value:"Update"}):Object(re.jsx)(b.a,{id:"btn-form",disabled:!0,children:"Edit"}),!0===t.permissions.includes("update all project")||t.permissions.includes("owner")?Object(re.jsx)(b.a,{"data-testid":"cancel-id",id:"btn-form",disabled:!!this.state.disabled,onClick:this.enableEdit,children:"Cancel"}):Object(re.jsx)(b.a,{"data-testid":"cancel-id",id:"btn-form",disabled:!0,children:"Cancel"})]})}),Object(re.jsxs)("div",{id:"second-div",children:[Object(re.jsxs)(ue.a,{size:"xs",placement:"left",show:this.state.show,onHide:this.handleViewMembers,children:[Object(re.jsxs)(ue.a.Header,{children:[Object(re.jsx)(ue.a.Title,{children:"Project Members"}),Object(re.jsx)(be.a,{})]}),Object(re.jsxs)(ue.a.Body,{children:[t.groupMembers.map((function(a,s){return Object(re.jsx)("div",{id:"memberDiv",children:a.email!==t.projectOwner?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{children:[Object(re.jsxs)("p",{id:"email-p",children:["Email: ",a.email]}),!0===t.permissions.includes("update all project")||t.permissions.includes("owner")?Object(re.jsx)(f.a,{id:"change-icon",icon:"pencil-square",onClick:function(){return e.handleEditRole(a.email)}}):Object(re.jsx)(re.Fragment,{}),!0===t.permissions.includes("remove members")||t.permissions.includes("owner")?Object(re.jsx)(f.a,{id:"remove-icon",icon:"user-times",onClick:function(){return e.removeMember(a.email)}}):Object(re.jsx)(re.Fragment,{})]}),Object(re.jsx)(be.a,{})]}):Object(re.jsxs)(re.Fragment,{children:["Owner: ",a.email,Object(re.jsx)(be.a,{})]})},s)})),!0===t.permissions.includes("add members")||t.permissions.includes("owner")?Object(re.jsx)(f.a,{onClick:this.addMemberModal,id:"add-icon",icon:"user-plus"}):Object(re.jsx)(re.Fragment,{})]})]}),Object(re.jsxs)(_.a,{"data-testid":"modal-test-id",backdrop:"static",show:this.state.showModal,onHide:this.handleCloseEdit,children:[Object(re.jsx)(_.a.Header,{children:!1===this.state.editMember?Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(_.a.Title,{style:{textAlign:"center"},children:"Add/Invite Members"})}):Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(_.a.Title,{style:{textAlign:"center"},children:"Change Permissions"})})}),Object(re.jsx)(_.a.Body,{children:Object(re.jsx)(ge.a,{id:"permission-div",justify:"space-around",children:Object(re.jsxs)("form",{onSubmit:this.handleAddMembers,children:[!1===this.state.editMember?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("input",{id:"email-input",onChange:this.change,type:"email",name:"memberName",placeholder:"Member Email"}),Object(re.jsx)("br",{}),void 0!==this.state.allMembersFromDb?Object(re.jsx)(te.a,{sticky:!0,name:"groupMembers",data:this.state.allMembersFromDb,appearance:"default",placeholder:"Search Members",style:{width:224},onSelect:function(t){return e.saveMember(t)}}):Object(re.jsx)(re.Fragment,{})]}):Object(re.jsx)(re.Fragment,{}),Object(re.jsxs)(ge.a.Item,{id:"can-do-div",colspan:24,md:6,children:[Object(re.jsx)("h6",{style:{textAlign:"center"},children:"Permissions"}),Object(re.jsx)(be.a,{}),Object(re.jsx)("div",{id:"check-list",children:Object(re.jsxs)(me.a,{name:"checkboxList",value:this.state.value,onChange:function(t){console.log("permission",t),e.setState({value:t})},children:[Object(re.jsx)(q.a,{value:"update project owner",children:"Change Project Owner"}),Object(re.jsx)(q.a,{value:"update graph",children:"Update Graph"}),Object(re.jsx)(q.a,{value:"update all project",children:"Update Project Information"}),Object(re.jsx)(q.a,{value:"delete project",children:"Delete Project"}),Object(re.jsx)(q.a,{value:"delete task",children:"Delete Task"}),Object(re.jsx)(q.a,{value:"remove members",children:"Remove Members"}),Object(re.jsx)(q.a,{value:"add members",children:"Add Members"}),Object(re.jsx)(q.a,{value:"view statistics",children:"View Statistics"})]})})]}),(!0===t.permissions.includes("add members")||t.permissions.includes("owner"))&&!1===this.state.editMember?Object(re.jsx)("input",{type:"submit",className:"rs-btn rs-btn-default",id:"add-member-btn",value:"Add Member"}):Object(re.jsx)(re.Fragment,{})]})})}),Object(re.jsx)(_.a.Footer,{children:!1===this.state.editMember?Object(re.jsx)(re.Fragment,{}):Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(b.a,{variant:"secondary",onClick:this.updateRole,children:"Update"})})})]})]}),Object(re.jsxs)("div",{id:"btn-form-div",children:[Object(re.jsx)(b.a,{"data-testid":"view-btn",id:"btn-info",onClick:this.handleViewMembers,children:"View Members"}),!0===t.permissions.includes("add members")||t.permissions.includes("owner")?Object(re.jsx)(b.a,{"data-testid":"add-btn",id:"btn-info",onClick:this.showAddMembers,children:"Add Members"}):Object(re.jsx)(b.a,{"data-testid":"add-btn",id:"btn-info",disabled:!0,children:"Add Members"})]})]})}}]),a}(r.a.Component),Oe=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={taskList:[]},s}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this,t=this.props.match,a=this.props.project;return void 0===a||void 0===a.projectName?Object(re.jsx)("div",{children:"Please Select Project"}):Object(re.jsxs)("div",{"data-testid":"tidProjectView",id:"projectView",children:[Object(re.jsx)(he.a,{id:"projectNav",collapsible:!0,children:Object(re.jsx)(g.a.Body,{children:Object(re.jsxs)(m.a,{pullRight:!0,vertical:!0,children:[Object(re.jsx)(m.a.Item,{title:"Edit Project",icon:Object(re.jsx)(f.a,{icon:"pencil"}),componentClass:p.b,to:"".concat(t.url,"/edit"),children:"Edit Project"}),Object(re.jsx)(m.a.Item,{title:"View Graph",icon:Object(re.jsx)(f.a,{icon:"views-authorize"}),componentClass:p.b,to:"".concat(t.url),children:"View Graph"})]})})}),Object(re.jsxs)(u.d,{children:[Object(re.jsx)(u.b,{exact:!0,path:"".concat(t.path),render:function(){return Object(re.jsx)(je,{updateParent:e.props.selectProject,project:a,user:e.props.user})}}),Object(re.jsx)(u.b,{path:"".concat(t.path,"/edit"),render:function(){return Object(re.jsx)(fe,{project:a,user:e.props.user})}})]})]})}}]),a}(s.Component);Oe.defaultProps={api:"http://localhost:9001"};var ve=Object(u.h)(Oe),xe=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.selectProject,a=e.deleteProject,s=e.project,r=e.link,n=Object(re.jsxs)(V.a,{title:"Project: ".concat(s.projectName),children:[Object(re.jsxs)("p",{children:["Description: ",s.projectDescription]}),Object(re.jsx)("br",{}),Object(re.jsxs)("div",{children:["MEMBERS: ",void 0!==s.groupMembers&&s.groupMembers.length>0?s.groupMembers.map((function(e,t){return Object(re.jsx)(be.a,{children:Object(re.jsxs)(be.a,{children:[Object(re.jsx)(f.a,{icon:"user-info"}),"".concat(e.email)," "]})},t)})):Object(re.jsx)("h5",{children:"No Members Yet"})]}),Object(re.jsx)("br",{}),Object(re.jsx)(b.a,{onClick:function(){return a(s)},children:"DELETE PROJECT"}),Object(re.jsx)("br",{}),Object(re.jsx)(p.b,{to:"".concat(r,"/edit"),onClick:function(){return t(s)},children:"EDIT PROJECT"})]});return Object(re.jsx)("div",{children:Object(re.jsx)(ee.a,{shaded:!0,bordered:!0,bodyFill:!1,style:{display:"inline-block",width:240},children:Object(re.jsxs)(ee.a,{id:"projHeader",header:"".concat(s.projectName),children:[Object(re.jsx)("div",{children:Object(re.jsxs)("small",{children:["Due Date: ",Object(re.jsx)("h6",{children:s.dueDate})," "]})}),Object(re.jsxs)("h6",{children:["Last Editted: ",s.lastAccessed]}),Object(re.jsx)(H.a,{trigger:"click",placement:"autoVertical",speaker:n,children:Object(re.jsx)(f.a,{icon:"info",onClick:function(){return console.log("clicked")}})}),Object(re.jsx)("br",{}),Object(re.jsx)(p.b,{onClick:function(){return t(s)},to:"".concat(r),children:"Open"}),Object(re.jsx)("br",{})]})})})}}]),a}(s.Component),ke=(a(552),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;Object(i.a)(this,a),(s=t.call(this,e)).cleanUp=function(){var e=new Date;s.setState({show:!1,next:!1,formValue:{projectName:"",description:"",startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()),dueDate:new Date(e.getFullYear(),e.getMonth()+1,e.getDate())},formError:{}})},s.handleSubmit=function(){var e=s.state.formValue,t=Object(j.a)({},e);if(e.dueDate instanceof Date){var a=Object(ie.a)(t.dueDate,"yyyy-MM-dd");t.dueDate=a}if(e.startDate instanceof Date){var r=Object(ie.a)(t.startDate,"yyyy-MM-dd");t.startDate=r}s.form.check()?s.props.sendProjectInfo(t):console.log("Form error")},s.handleShow=function(){s.setState({show:!0})},s.handleNext=function(){s.setState({next:!s.state.next})},s.handleInfoChange=function(e){s.setState({formValue:e})},s.handleProjectErrors=function(e){s.setState({formError:e})};var r=new Date;return s.state={show:!1,next:!1,formValue:{projectName:"",description:"",startDate:new Date(r.getFullYear(),r.getMonth(),r.getDate()),dueDate:new Date(r.getFullYear(),r.getMonth()+1,r.getDate())},formError:{}},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.formError,s=t.formValue,r=J.a.Types,n=r.DateType,o=r.StringType,i=new Date;i.setFullYear(i.getFullYear()+2);var c=J.a.Model({projectName:o().minLength(2,"Project name should have more than 2 letters").isRequired("This field is required."),startDate:n().min(new Date(i.getFullYear()-2,i.getMonth(),i.getDate()-1),"The start date cannot be set to a date that has passed by more than a day.").isRequired("This field is required."),dueDate:n().min(this.state.formValue.startDate,"The due date cannot be before start date or a date in the past.").isRequired("This field is required."),description:o().minLength(5,"Please add more details on the description").isRequired("This field is required.")});return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(_.a,{"data-testid":"modal-id-test",backdrop:"static",show:this.state.show,onHide:this.cleanUp,children:[Object(re.jsx)(_.a.Header,{children:Object(re.jsx)(_.a.Title,{children:"New Project"})}),Object(re.jsx)(_.a.Body,{children:Object(re.jsxs)(L.a,{formValue:s,model:c,ref:function(t){return e.form=t},onCheck:function(t){return e.handleProjectErrors(t)},onChange:this.handleInfoChange,children:[Object(re.jsxs)(B.a,{children:[Object(re.jsx)(G.a,{children:"Project Name"}),Object(re.jsx)(z.a,{name:"projectName",placeholder:"Project Name"}),Object(re.jsx)(Q.a,{tooltip:!0,children:"Required"})]}),Object(re.jsxs)(B.a,{children:[Object(re.jsx)(G.a,{children:"Description"}),Object(re.jsx)(z.a,{name:"description",placeholder:"Project Description"}),Object(re.jsx)(Q.a,{tooltip:!0,children:"Required"})]}),Object(re.jsx)(oe,{accepter:X.a,name:"startDate",label:"Start Date",oneTap:!0,format:"YYYY-MM-DD",error:a.startDate}),Object(re.jsx)(oe,{accepter:X.a,name:"dueDate",label:"Due Date",oneTap:!0,format:"YYYY-MM-DD",error:a.dueDate})]})}),Object(re.jsx)(_.a.Footer,{children:Object(re.jsx)(b.a,{variant:"secondary",onClick:this.handleSubmit,children:"Create"})})]})})}}]),a}(r.a.Component)),we=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).viewProjectsFromAPI=function(){s.setState({loading:!0}),w.a.get("".concat(s.props.api,"/project/getAllProjectsByUserEmail/").concat(s.props.loggedUser.email),{headers:{authorization:s.props.loggedUser.token}}).then((function(e){console.log("Success",e),void 0!==e.data.data?s.setState({projects:e.data.data,allProjects:e.data.data,loading:!1}):(s.setState({loading:!1}),alert("No projects"))})).catch((function(e){s.setState({loading:!1}),console.log("Error or Rejected",e)}))},s.selectCurrentProject=function(e){s.setState({currentProject:e})},s.updateLastAcessed=function(e){var t={lastDateAccessed:(new Date).toJSON().slice(0,19),projId:e._id};console.log("B4 update",t),w.a.put("".concat(s.props.api,"/project/updateProjectAccessDate"),t).then((function(e){console.log("comms for accessdate",e),e.data.data?s.viewProjectsFromAPI():console.log("Did not update access date successfully")})).catch((function(e){console.log("Comm Error",e)}))},s.deleteProject=function(e){void 0===e?alert("Can't delete Project. Project Invalid"):window.confirm("Are you sure you want to delete project ["+e.projectName+"] ?")?(s.setState({loading:!0}),console.log("B4 del",e),w.a.delete("".concat(s.props.api,"/project/deleteProject"),{headers:{authorization:s.props.loggedUser.token},data:{email:s.props.loggedUser.email,projectID:e._id}}).then((function(e){if(e.status>=400)throw e;void 0===e.data.message?(alert("Network Error"),s.setState({loading:!1})):(s.setState({answer:e.data.message}),s.viewProjectsFromAPI())})).catch((function(e){console.log("error",e),s.setState({loading:!1})}))):T("Project not deleted","info")},s.handleSortChange=function(e){s.setState({sortValue:e},(function(){return s.sortProjects()}))},s.handleFilterChange=function(e){s.setState({filterValue:e},(function(){return s.filterProjects()}))},s.sortProjects=function(){if("recent"===s.state.sortValue){var e=s.state.projects.sort((function(e,t){var a=e.lastAccessed.toLowerCase(),s=t.lastAccessed.toLowerCase();return a<s?1:a>s?-1:0}));s.setState({projects:e})}else if("alpha"===s.state.sortValue){var t=s.state.projects.sort((function(e,t){var a=e.projectName.toLowerCase(),s=t.projectName.toLowerCase();return a<s?-1:a>s?1:0}));s.setState({projects:t})}else{var a=s.state.projects.sort((function(e,t){var a=e.startDate.toLowerCase(),s=t.startDate.toLowerCase();return a<s?1:a>s?-1:0}));s.setState({projects:a})}},s.filterProjects=function(){if("myOwn"===s.state.filterValue){var e=s.state.allProjects.filter((function(e){return e.projectOwner===s.props.loggedUser.email}));s.setState({projects:e})}else if("shared"===s.state.filterValue){var t=s.state.allProjects.filter((function(e){return e.projectOwner!==s.props.loggedUser.email}));s.setState({projects:t})}else console.log("all"),s.setState({projects:s.state.allProjects})},s.newProjectModalRef=function(e){s.showModal=e&&e.handleShow},s.showM=function(){s.showModal()},s.sendProjectInfo=function(e){e.email=s.props.loggedUser.email,console.log("b4 api",e),w.a.post("".concat(s.props.api,"/project/newProject"),e,{headers:{authorization:s.props.loggedUser.token,"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((function(e){console.log("api",e),e.headers.authorization?(T("Project created","success"),s.props.updateUserToken(e.headers.authorization),s.viewProjectsFromAPI()):T("".concat(e.data.message),"warning")}),(function(e){return console.log("rejected",e)})).catch((function(e){for(var t=0,a=Object.keys(e);t<a.length;t++){var s=a[t];console.log(s,": ",e[s])}console.log("err",e)}))},s.state={sortValue:"recent",loading:!1,currentProject:{},projects:[],allProjects:[],filterValue:"all",filteredProjects:{}},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.viewProjectsFromAPI()}},{key:"render",value:function(){var e=this,t=this.props.match;return this.state.loading?Object(re.jsx)(v.a,{backdrop:!1,speed:"slow",size:"lg"}):Object(re.jsxs)("div",{"data-testid":"tidProjectManager",id:"projectManager",children:[Object(re.jsx)(ke,{ref:this.newProjectModalRef,sendProjectInfo:this.sendProjectInfo,api:this.props.api}),Object(re.jsxs)(u.d,{children:[Object(re.jsx)(u.b,{path:"".concat(t.path,"/project"),render:function(){return Object(re.jsx)(ve,{user:e.props.loggedUser,project:e.state.currentProject,selectProject:e.selectCurrentProject})}}),Object(re.jsx)(u.b,{children:Object(re.jsxs)("div",{children:["Sort Projects ",Object(re.jsx)("br",{}),Object(re.jsx)(b.a,{onClick:this.showM,children:Object(re.jsx)(f.a,{icon:"plus-circle",title:"New Project"})}),Object(re.jsx)(x.a,{data:[{label:"All Projects",value:"all"},{label:"Projects I Own",value:"myOwn"},{label:"Projects Shared with me",value:"shared"}],value:this.state.filterValue,onChange:this.handleFilterChange}),Object(re.jsx)(x.a,{data:[{label:"Recently Accessed",value:"recent"},{label:"Alphabetical",value:"alpha"},{label:"Date Created",value:"date"}],value:this.state.sortValue,onChange:this.handleSortChange}),Object(re.jsx)("div",{"data-testid":"tidProjList",id:"projects-list",children:this.state.projects.length>0?this.state.projects.map((function(a,s){return Object(re.jsx)(xe,{project:a,link:"".concat(t.url,"/project"),selectProject:e.selectCurrentProject,deleteProject:e.deleteProject},"".concat(s+1).concat(a.projectName))})):Object(re.jsx)("div",{children:Object(re.jsx)("h1",{children:"No Projects found please refresh"})})})]})})]})]})}}]),a}(s.Component);we.defaultProps={user:{email:"ntpnaane@gmail.com"},api:"http://localhost:9001"};var ye={updateUserToken:function(e){return{type:"UPDATE_TOKEN",payload:{token:e}}}},Se=Object(y.b)((function(e){return{loggedUser:e.loggedUser}}),ye)(Object(u.h)(we)),Te=a(324),De=a(323),Ne=(a(553),a.p+"static/media/Logo3.ba0a191c.png"),Ce=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleShow=function(){s.setState({show:!0})},s.handleClose=function(){s.setState({show:!1})},s.enableEdit=function(){s.setState({disabled:!s.state.disabled})},s.state={show:!1,disabled:!0},s}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.user.picture,t=this.props.user;return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)(ue.a,{full:!0,placement:"top",backdrop:"static",show:this.state.show,onHide:this.handleClose,children:[Object(re.jsxs)(ue.a.Header,{children:[Object(re.jsx)(ue.a.Title,{style:{textAlign:"center"},children:"Profile"}),Object(re.jsx)(be.a,{})]}),Object(re.jsxs)(ue.a.Body,{id:"body-div",children:[Object(re.jsxs)("div",{id:"picture-div",children:[Object(re.jsx)("img",{src:e}),Object(re.jsx)(be.a,{}),Object(re.jsx)("h6",{children:this.props.user.name})]}),Object(re.jsx)("div",{id:"div-form",children:Object(re.jsxs)("form",{className:"profileForm",onSubmit:this.onSubmit,children:[Object(re.jsx)("label",{children:"Username"}),Object(re.jsx)("input",{defaultValue:this.props.user.name,disabled:!!this.state.disabled,onChange:this.change,type:"text"}),Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)("input",{value:t.email,disabled:!0,type:"text"})]})}),Object(re.jsx)("img",{id:"logo-pics",src:Ne})]})]})})}}]),a}(r.a.Component),Pe=a(73),Me=function(){var e=Object(Pe.b)().logout;return Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(b.a,{onClick:function(){return e()},id:"signup-btn",children:"Logout"})})},Ee=a.p+"static/media/Logo4.008292a7.png",Ae=(a(560),a(592)),Ie=a(590),Fe=a(22),Ue=a(593),Re=a(591),_e=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).firstSearch=function(){s.setState({loading:!0}),w.a.get("".concat(s.props.api,"/project/convertToKanbanBoard/").concat(s.props.loggedUser.email),{headers:{authorization:s.props.user.token}}).then((function(e){if(void 0!==e.data){var t=[],a=1;console.log("length 79",e.data.data.length);for(var r=0;r<e.data.data.length;r++){console.log("project 81",e.data.data[r]);for(var n=e.data.data[r],o=0;o<n.tasks.length;o++){var i=n.tasks[o];i.projectName=n.projectName,i.Priority=i.status,i.newID=a++,t.push(i)}}s.setState({projectsByEmail:t,loading:!1})}else s.setState({loading:!1})})).catch((function(e){console.log("error in initialization",e)}))},s.onDropHandler=function(e){console.log(e.data)},s.onDragStop=function(e){console.log("afterDrag data: ",e.data),s.updateChanges(e.data[0])},s.onDataBound=function(e){console.log("afterSave data:",e)},s.updateChanges=function(e){e.taskID=e._id,console.log("updated ",e),w.a.patch("".concat(s.props.api,"/task/updateEverythingTask"),e,{headers:{authorization:s.props.loggedUser.token}}).then((function(e){console.log(e)})).catch((function(e){e.response&&console.log(e.response)}))},s.task=[],s.myData2=[],s.nyData3=[],s.state={loading:!1,test:[[]],projectsByEmail:[],projectsByEmail2:[],allTasks:[]},s.fields=[{text:"Unique ID",key:"_id"},{key:"status",type:"DropDown"},{key:"description",type:"TextArea"}],s}return Object(c.a)(a,[{key:"columnTemplate",value:function(e){return Object(re.jsxs)("div",{className:"header-template-wrap",children:[Object(re.jsx)("div",{className:"header-icon e-icons "+e.keyField}),Object(re.jsx)("div",{className:"header-text",children:e.headerText})]})}},{key:"componentDidMount",value:function(){this.firstSearch()}},{key:"cardTemplate",value:function(e){return Object(re.jsx)("div",{className:"card-template",children:Object(re.jsx)("div",{className:"card-template-wrap",children:Object(re.jsxs)("table",{className:"card-template-wrap",children:[Object(re.jsxs)("colgroup",{children:[Object(re.jsx)("col",{style:{width:"55px"}}),Object(re.jsx)("col",{})]}),Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsx)("td",{className:"e-title",children:Object(re.jsxs)("div",{className:"e-card-stacked",children:[Object(re.jsx)("div",{className:"e-card-header",children:Object(re.jsx)("div",{className:"e-card-header-caption",children:Object(re.jsx)("div",{style:{color:"#1386d9"},className:"e-card-header-title e-tooltip-text",children:e.title})})}),Object(re.jsx)("div",{className:"e-card-content",style:{lineHeight:"2.75em"},children:Object(re.jsx)("table",{className:"card-template-wrap",style:{tableLayout:"auto"},children:Object(re.jsxs)("tbody",{children:[Object(re.jsxs)("tr",{children:[("not started"===e.status||"in progress"===e.status||"complete"===e.status)&&Object(re.jsx)("td",{colSpan:2,children:""!==e.status&&Object(re.jsx)("div",{className:"e-description e-tooltip-text",children:e.description})}),"complete"===e.status&&Object(re.jsx)("td",{className:"card-content"})]}),Object(re.jsx)("tr",{children:""!==e.status&&Object(re.jsxs)("td",{className:"card-content",children:["not started"===e.status&&Object(re.jsx)("div",{className:"e-preparingText e-tooltip-text",children:"Not Started"}),"in progress"===e.status&&Object(re.jsx)("div",{className:"e-readyText e-tooltip-text",children:"In Progress"}),"complete"===e.status&&Object(re.jsx)("div",{className:"e-deliveredText e-tooltip-text",children:"Complete"})]})})]})})})]})})})})]})})})}},{key:"searchClick",value:function(e){var t=e.value,a=new Fe.b;""!==t&&(a=(new Fe.b).search(t,["_id","description","title","projectName"],"contains",!0)),this.kanbanObj.query=a}},{key:"reset",value:function(){this.kanbanObj.query=new Fe.b}},{key:"resetClick",value:function(){document.getElementById("search_text").value="",this.reset()}},{key:"onFocus",value:function(e){""===e.target.value&&this.reset()}},{key:"render",value:function(){var e=this;return this.state.loading?Object(re.jsx)(v.a,{backdrop:!1,speed:"slow",size:"lg"}):Object(re.jsxs)("div",{className:"schedule-control-section",children:[Object(re.jsx)("div",{className:"col-lg-12 control-section",children:Object(re.jsx)("div",{className:"control-wrapper",children:Object(re.jsx)(Ae.a,{cssClass:"kanban-card-template",id:"kanban",keyField:"status",enableTooltip:!0,dataSource:this.state.projectsByEmail,cardSettings:{contentField:"description",headerField:"_id",template:this.cardTemplate.bind(this)},swimlaneSettings:{keyField:"projectName",textField:"projectName"},cardClick:this.handler,style:{background:"black"},dragStop:this.onDragStop.bind(this),dataBound:this.onDataBound.bind(this),ref:function(t){e.kanbanObj=t},children:Object(re.jsxs)(Ie.b,{children:[Object(re.jsx)(Ie.a,{headerText:"Not Started",keyField:"not started",template:this.columnTemplate.bind(this)}),Object(re.jsx)(Ie.a,{headerText:"In Progress",keyField:"in progress",template:this.columnTemplate.bind(this)}),Object(re.jsx)(Ie.a,{headerText:"Complete",keyField:"complete",template:this.columnTemplate.bind(this)})]})})})}),Object(re.jsx)("div",{className:"col-lg-3 property-section",children:Object(re.jsxs)("div",{className:"property-panel-section",children:[Object(re.jsx)("p",{className:"property-panel-header",children:"Searching"}),Object(re.jsxs)("div",{className:"property-panel-content",children:[Object(re.jsx)("table",{className:"e-filter-table",children:Object(re.jsx)("tr",{children:Object(re.jsx)("td",{children:Object(re.jsx)("div",{children:Object(re.jsx)(Ue.a,{id:"search_text",ref:function(t){e.textBoxObj=t},showClearButton:!0,placeholder:"Enter search text",onFocus:this.onFocus.bind(this),input:this.searchClick.bind(this),style:{color:"white"}})})})})}),Object(re.jsx)("div",{className:"e-reset-button",children:Object(re.jsx)(Re.a,{id:"reset_filter",className:"e-btn",onClick:this.resetClick.bind(this),children:"Reset"})})]})]})})]})}}]),a}(s.Component);_e.defaultProps={api:"http://localhost:9001"};var Ve={updateUserToken:function(e){return{type:"UPDATE_TOKEN",payload:{token:e}}}},Le=Object(y.b)((function(e){return{loggedUser:e.loggedUser}}),Ve)(_e),Be=a(597),Ge=a(103),ze=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).getProjectChart=function(e){s.state.projects.length>0&&(s.setState({showChart:!0}),console.log("get proj id",s.state.projId),w.a.get("".concat(s.state.api,"/project/statistics/RadarGraph/")+e,{headers:{authorization:s.props.user.token}}).then((function(e){console.log("Stats Success",e.data.data),void 0!==e.data.data&&s.setState({nodes:e.data.data})})).catch((function(e){console.log("Error or Rejected",e)})))},s.getAllProjects=function(){w.a.get("".concat(s.state.api,"/project/getAllProjectsByUserEmail/").concat(s.props.user.email),{headers:{authorization:s.props.user.token}}).then((function(e){console.log("Success",e),void 0!==e.data.data?s.setState({projects:e.data.data}):alert("No projects")})).catch((function(e){console.log("Error or Rejected",e)}))},s.state={currentProject:{},projects:[],nodes:[],api:"http://localhost:9001",showChart:!1},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAllProjects()}},{key:"render",value:function(){var e=this;return this.state.projects.length>0&&console.log("stats proj",this.state.projId),console.log("nodes",this.state.nodes),Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{children:[Object(re.jsx)("h3",{children:"Project Tasks Statistics"}),Object(re.jsx)(O.a,{title:"Projects",children:Object(re.jsx)(O.a.Item,{style:{minWidth:"30vw",marginRight:"10%"},children:Object(re.jsx)(Be.a,{hover:!0,children:this.state.projects.map((function(t,a){return t.projectOwner===e.props.user.email||t.permissions.includes("view statistics")?Object(re.jsx)(Be.a.Item,{index:a,children:Object(re.jsxs)(ge.a,{children:[Object(re.jsx)(ge.a.Item,{colspan:6,children:Object(re.jsx)("div",{children:t.projectName})}),Object(re.jsx)(ge.a.Item,{colspan:6}),Object(re.jsx)(ge.a.Item,{style:{},children:Object(re.jsx)(b.a,{onClick:function(){return e.getProjectChart(t._id)},children:"View"})})]})},t.projectName):Object(re.jsx)(re.Fragment,{})}))})})})]}),this.state.projects.length>0&&this.state.showChart?Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(Ge.c,{data:{labels:this.state.nodes.labels,datasets:[{label:this.state.nodes.projectName,data:this.state.nodes.data,fill:!0,backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgb(255,99,132)",pointBackgroundColor:"rgb(255, 99, 132)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(255, 99, 132)"}]},height:400,width:600,options:{maintainAspectRatio:!1,elements:{line:{borderWidth:3}},scales:{r:{angleLines:{display:!1}}}}})}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("h4",{children:"Select Project you want to view the Tasks stats for."}),Object(re.jsx)("img",{alt:"graph logo",id:"logoPic",src:Ee})]})]})}}]),a}(r.a.Component),qe=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).getAllProjects=function(){w.a.get("".concat(s.state.api,"/project/getAllProjectsByUserEmail/").concat(s.props.user.email),{headers:{authorization:s.props.user.token}}).then((function(e){console.log("Success",e),void 0!==e.data.data?s.setState({projects:e.data.data}):alert("No projects")})).catch((function(e){console.log("Error or Rejected",e)}))},s.getChartStats=function(e){s.state.projects.length>0&&(s.setState({showChart:!0}),console.log("get proj id",s.state.projId),w.a.get("".concat(s.state.api,"/project/statistics/donutChart/")+e,{headers:{authorization:s.props.user.token}}).then((function(e){console.log("Stats Success",e.data.data),void 0!==e.data.data&&s.setState({task:e.data.data})})).catch((function(e){console.log("Error or Rejected",e)})))},s.state={currentProject:{},projects:[],task:[],api:"http://localhost:9001",showChart:!1},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAllProjects()}},{key:"render",value:function(){var e=this;return void 0!==this.state.task.notStartedTasks&&console.log("tasks show",this.state.task.inProgressTasks),Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{children:[Object(re.jsx)("h3",{children:"Project Sub-Tasks Statistics"}),Object(re.jsx)(O.a,{title:"Projects",children:Object(re.jsx)(O.a.Item,{style:{minWidth:"30vw",marginRight:"10%"},children:Object(re.jsx)(Be.a,{hover:!0,children:this.state.projects.map((function(t,a){return t.projectOwner===e.props.user.email||t.permissions.includes("view statistics")?Object(re.jsx)(Be.a.Item,{index:a,children:Object(re.jsxs)(ge.a,{children:[Object(re.jsx)(ge.a.Item,{colspan:6,children:Object(re.jsx)("div",{children:t.projectName})}),Object(re.jsx)(ge.a.Item,{colspan:6}),Object(re.jsx)(ge.a.Item,{children:Object(re.jsx)(b.a,{onClick:function(){return e.getChartStats(t._id)},children:"View"})})]})},t.projectName):Object(re.jsx)(re.Fragment,{})}))})})})]}),this.state.projects.length>0&&this.state.showChart?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("h5",{children:this.state.task.projectName}),Object(re.jsx)(Ge.b,{data:{labels:["Not Started","In-Progress","Complete"],datasets:[{label:this.state.task.projectName,data:this.state.task.data,backgroundColor:["rgb(255,3,3)","rgb(234,135,27)","rgb(73,239,18)"],hoverOffset:4}]},height:400,width:600,options:{maintainAspectRatio:!1}}),void 0!==this.state.task.notStartedTasks&&this.state.task.notStartedTasks!==[]?Object(re.jsx)("div",{id:"dropdown-div",children:Object(re.jsx)(O.a,{id:"dropdown-title",title:"Not Started",children:this.state.task.notStartedTasks.map((function(e,t){return Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(O.a.Item,{index:t,children:e.title},e)})}))})}):Object(re.jsx)(re.Fragment,{}),void 0!==this.state.task.inProgressTasks&&this.state.task.inProgressTasks!==[]?Object(re.jsx)("div",{id:"dropdown-div-2",children:Object(re.jsx)(O.a,{id:"dropdown-title",title:"In Progress",children:this.state.task.inProgressTasks.map((function(e,t){return Object(re.jsx)(O.a.Item,{index:t,children:e.title},e)}))})}):Object(re.jsx)(re.Fragment,{}),void 0!==this.state.task.finishedTasks&&this.state.task.finishedTasks!==[]?Object(re.jsx)("div",{id:"dropdown-div-3",children:Object(re.jsx)(O.a,{id:"dropdown-title",title:"Complete",children:this.state.task.finishedTasks.map((function(e,t){return Object(re.jsx)(O.a.Item,{index:t,children:e.title},e)}))})}):Object(re.jsx)(re.Fragment,{})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("h4",{children:"Select project you want to view the sub-tasks progress for."}),Object(re.jsx)("img",{alt:"graph logo",id:"logoPic",src:Ee})]})]})}}]),a}(r.a.Component),He=a(222),Ye=a(223),Ke=(a(564),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).getUserProjects=function(){w.a.get("".concat(s.state.api,"/project/getAllProjectsByUserEmail/").concat(s.props.user.email),{headers:{authorization:s.props.user.token}}).then((function(e){void 0!==e.data.data&&s.setState({projects:e.data.data})})).catch((function(e){console.log("Error or Rejected",e)}))},s.state={api:"http://localhost:9001",projects:[],date:void 0},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getUserProjects()}},{key:"render",value:function(){var e=this;if(this.state.projects.length>0){console.log(this.state.projects);var t=[];return this.state.projects.map((function(a,s){return t[s]={title:e.state.projects[s].projectName,date:e.state.projects[s].dueDate}})),console.log(t),Object(re.jsx)("div",{children:Object(re.jsx)(He.a,{plugins:[Ye.a],initialView:"dayGridMonth",weekends:!0,events:t})})}return Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(He.a,{plugins:[Ye.a],initialView:"dayGridMonth"})})}}]),a}(r.a.Component)),We=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).getAllProjects=function(){w.a.get("".concat(s.state.api,"/project/getAllProjectsByUserEmail/").concat(s.props.user.email),{headers:{authorization:s.props.user.token}}).then((function(e){console.log("Success",e),void 0!==e.data.data?s.setState({projects:e.data.data}):alert("No projects")})).catch((function(e){console.log("Error or Rejected",e)}))},s.getChartStats=function(e){s.state.projects.length>0&&(s.setState({showChart:!0}),console.log("get proj id",s.state.projId),w.a.get("".concat(s.state.api,"/project/statistics/barchart/")+e+"/"+s.props.user.email,{headers:{authorization:s.props.user.token}}).then((function(e){console.log("Stats Assigned Success",e.data.data),void 0!==e.data.data&&s.setState({task:e.data.data})})).catch((function(e){console.log("Error or Rejected",e)})))},s.state={currentProject:{},projects:[],task:[],api:"http://localhost:9001",showChart:!1},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAllProjects()}},{key:"render",value:function(){var e=this;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{children:[Object(re.jsx)("h3",{children:" Assigned Sub-Tasks Statistics"}),Object(re.jsx)(O.a,{title:"Projects",children:Object(re.jsx)(O.a.Item,{style:{minWidth:"30vw",marginRight:"10%"},children:Object(re.jsx)(Be.a,{hover:!0,children:this.state.projects.map((function(t,a){return Object(re.jsx)(Be.a.Item,{index:a,children:Object(re.jsxs)(ge.a,{children:[Object(re.jsx)(ge.a.Item,{colspan:6,children:Object(re.jsx)("div",{children:t.projectName})}),Object(re.jsx)(ge.a.Item,{colspan:6}),Object(re.jsx)(ge.a.Item,{children:Object(re.jsx)(b.a,{onClick:function(){return e.getChartStats(t._id)},children:"View"})})]})},t.projectName)}))})})})]}),this.state.projects.length>0&&this.state.showChart?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("h5",{children:this.state.task.projectName}),Object(re.jsx)(Ge.a,{data:{labels:["Not Started","In-Progress","Complete"],datasets:[{label:this.state.task.projectName,data:this.state.task.data,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(137,255,86,0.2)"],borderColor:["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(137, 255, 86)"],borderWidth:1}]}}),void 0!==this.state.task.notStartedTasks&&this.state.task.notStartedTasks!==[]?Object(re.jsx)("div",{className:"dropdown-div-bar",id:"dropdown-div",children:Object(re.jsx)(O.a,{id:"dropdown-title",title:"Not Started",children:this.state.task.notStartedTasks.map((function(e,t){return Object(re.jsx)(O.a.Item,{index:t,children:e.title},e)}))})}):Object(re.jsx)(re.Fragment,{}),void 0!==this.state.task.inProgressTasks&&this.state.task.inProgressTasks!==[]?Object(re.jsx)("div",{className:"dropdown-div-bar-2",id:"dropdown-div-2",children:Object(re.jsx)(O.a,{id:"dropdown-title",title:"In-Progress",children:this.state.task.inProgressTasks.map((function(e,t){return Object(re.jsx)(O.a.Item,{index:t,children:e.title},e)}))})}):Object(re.jsx)(re.Fragment,{}),void 0!==this.state.task.finishedTasks&&this.state.task.finishedTasks!==[]?Object(re.jsx)("div",{className:"dropdown-div-bar-3",id:"dropdown-div-3",children:Object(re.jsx)(O.a,{id:"dropdown-title",title:"Complete",children:this.state.task.finishedTasks.map((function(e,t){return Object(re.jsx)(O.a.Item,{index:t,children:e.title},e)}))})}):Object(re.jsx)(re.Fragment,{})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("h4",{children:"Select project you want to view your assigned sub-tasks progress for."}),Object(re.jsx)("img",{alt:"graph logo",id:"logoPic",src:Ee})]})]})}}]),a}(r.a.Component),Je=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSideBar=function(){s.setState({showSideBar:!s.state.showSideBar})},s.profileModalRef=function(e){s.showProfile=e&&e.handleShow},s.changeRedirect=function(e){return s.setState({redirect:!s.state.redirect}),Object(re.jsx)(u.a,{to:e})},s.showP=function(){s.showProfile()},s.reloadProjectsInManager=function(e){console.log("ref",e)},s.state={show:!0,showSideBar:!0,redirect:!0,createResponse:"",viewOnly:!1},s}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.match;this.props.authUser.picture;return Object(re.jsxs)("div",{"data-testid":"main-container-id",className:"main-container",children:[Object(re.jsx)(Ce,{user:this.props.authUser,ref:this.profileModalRef}),Object(re.jsx)("nav",{id:"nav-bar",children:Object(re.jsxs)("div",{style:{display:"table-row"},children:[Object(re.jsx)("div",{id:"side-bar-button",children:!0===this.state.showSideBar?Object(re.jsx)(De.a,{id:"btn-side-bar",onClick:this.handleSideBar}):Object(re.jsx)(Te.a,{id:"btn-side-bar",onClick:this.handleSideBar})}),Object(re.jsx)("img",{alt:"graph logo",id:"logo-pic",src:Ee}),Object(re.jsx)(b.a,{id:"profile-btn",onClick:this.showP,children:"Profile"}),Object(re.jsx)(Me,{})]})}),Object(re.jsxs)("div",{id:"content",children:[!0===this.state.showSideBar?Object(re.jsx)("div",{id:"sidebar",children:Object(re.jsx)(g.a,{collapsible:"true",id:"side-nav",children:Object(re.jsx)(g.a.Body,{children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(m.a.Item,{onClick:function(){return e.changeRedirect("".concat(t.url,"/manager"))},id:"nav-option",icon:Object(re.jsx)(f.a,{icon:"dashboard"}),componentClass:p.b,to:"/dashboard",children:"Dashboard"}),this.state.viewOnly?Object(re.jsxs)(O.a,{title:"View Only",children:[Object(re.jsx)(O.a.Item,{children:"Own Project"}),Object(re.jsx)(O.a.Item,{children:"Shared Project"})]}):Object(re.jsx)(re.Fragment,{}),Object(re.jsx)(m.a.Item,{id:"nav-option",icon:Object(re.jsx)(f.a,{icon:"calendar"}),componentClass:p.b,to:"".concat(t.url,"/modal"),children:"Calendar"}),Object(re.jsx)(m.a.Item,{id:"nav-option",icon:Object(re.jsx)(f.a,{icon:"tasks"}),componentClass:p.b,to:"".concat(t.url,"/kanban"),children:"Kanban"}),Object(re.jsxs)(O.a,{id:"nav-option",title:"Statistics",icon:Object(re.jsx)(f.a,{icon:"bar-chart"}),children:[Object(re.jsx)(O.a.Item,{id:"nav-option",componentClass:p.b,to:"".concat(t.url,"/radarChart"),children:"Project Tasks"}),Object(re.jsx)(O.a.Item,{id:"nav-option",componentClass:p.b,to:"".concat(t.url,"/pieChart"),children:"Project Subtask"}),Object(re.jsx)(O.a.Item,{id:"nav-option",componentClass:p.b,to:"".concat(t.url,"/barChart"),children:"Assigned Task"})]})]})})})}):Object(re.jsx)(re.Fragment,{}),Object(re.jsx)("div",{id:"main-content",children:Object(re.jsxs)(u.d,{children:[Object(re.jsx)(u.b,{path:"".concat(t.path,"/modal"),exact:!0,children:Object(re.jsx)(Ke,{user:this.props.authUser})}),Object(re.jsx)(u.b,{path:"".concat(t.path,"/manager"),render:function(){return Object(re.jsx)(Se,{})}}),Object(re.jsx)(u.b,{path:"".concat(t.path,"/kanban"),render:function(){return Object(re.jsx)(Le,{user:e.props.authUser})}}),Object(re.jsx)(u.b,{path:"".concat(t.path,"/radarChart"),exact:!0,children:Object(re.jsx)(ze,{user:this.props.authUser})}),Object(re.jsx)(u.b,{path:"".concat(t.path,"/pieChart"),exact:!0,children:Object(re.jsx)(qe,{user:this.props.authUser})}),Object(re.jsx)(u.b,{path:"".concat(t.path,"/barChart"),exact:!0,children:Object(re.jsx)(We,{user:this.props.authUser})}),this.state.redirect?this.changeRedirect("".concat(t.url,"/manager")):""]})})]})]})}}]),a}(r.a.Component);var Qe={updateUserToken:function(e){return{type:"UPDATE_TOKEN",payload:{token:e}}}},Xe=Object(y.b)((function(e){return{loggedUser:e.loggedUser}}),Qe)(Object(u.h)(Je)),Ze=a(616),$e=(a(565),a(566),function(){var e=Object(Pe.b)().loginWithRedirect;return Object(re.jsx)(b.a,{onClick:function(){return e()},id:"signin-btn",children:"Sign In or Sign Up"})}),et=a.p+"static/media/graph_2.4614f5ac.svg",tt=a.p+"static/media/dashboard.c6964198.jpg",at=a.p+"static/media/createp.dd38ea6f.jpg",st=a.p+"static/media/graph.52d5b2d2.jpg",rt=a.p+"static/media/stats1.3c5dbd50.jpg",nt=a.p+"static/media/stats2.c6147eb6.jpg";var ot=function(e){var t=e.logInvalid,a=Object(Pe.b)(),s=a.user,r=a.isAuthenticated,n=a.isLoading;return console.log("user",s),n?Object(re.jsx)(v.a,{speed:"fast",content:"Loading"}):Object(re.jsxs)("div",{"data-testid":"main-landing-id",id:"main-div-landing",children:[Object(re.jsxs)("div",{id:"left-div",children:[Object(re.jsx)("img",{id:"graph-picture",src:et,alt:"graph-picture"}),Object(re.jsxs)(Ze.a,{id:"carousel-id",autoplay:!0,shape:"bar",className:"custom-slider",children:[Object(re.jsx)("img",{src:tt}),Object(re.jsx)("img",{src:at}),Object(re.jsx)("img",{src:st}),Object(re.jsx)("img",{src:rt}),Object(re.jsx)("img",{src:nt})]})]}),Object(re.jsxs)("div",{id:"right-div",children:[Object(re.jsx)("h1",{id:"pageName",children:"GRAPH PATH "}),Object(re.jsxs)("p",{className:"aboutText introText",children:["Graph path is an interactive graph based project Management tool. ",Object(re.jsx)("br",{}),"It aims to organise tasks of a project on a interactive and user friendly graph."]}),Object(re.jsxs)("div",{id:"landing-btn",children:[!r&&Object(re.jsx)($e,{}),r&&s.email_verified&&Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(b.a,{onClick:function(){return t(s)},id:"signin-btn",children:"Proceed"})})]})]})]})},it=function(){var e=Object(u.g)();return console.log("Not FOund ",e),Object(re.jsxs)("h1",{children:["404 Not Found ",e.location.pathname]})},ct=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).changeLogStatus=function(e){console.log("logged",e);var t={email:e.email,userObject:e};w.a.post("http://localhost:9001/user/requestToken",t).then((function(t){var a=Object(j.a)({},e);t.headers.authorization?(a.token=t.headers.authorization,console.log("Authed",a),s.props.createUser(a),s.setState({logged:!s.state.logged,loggedUser:a})):alert(t.message)})).catch((function(e){console.log("for real",e)}))},s.signInMododal=function(){s.setState({openSignin:!s.state.openSignin})},s.state={show1:!1,show2:!1,show:!1,openSignin:!1,logged:!1,loggedUser:{}},s.close=s.close.bind(Object(h.a)(s)),s.open=s.open.bind(Object(h.a)(s)),s}return Object(c.a)(a,[{key:"open",value:function(){this.setState({show1:!0,show2:!1})}},{key:"close",value:function(){this.setState({show1:!1})}},{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{"data-testid":"tidHeader",children:Object(re.jsx)(p.a,{children:Object(re.jsxs)(u.d,{children:[Object(re.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(ot,{logInvalid:e.changeLogStatus}),e.state.logged?Object(re.jsx)(u.a,{to:"/dashboard"}):""]})}}),Object(re.jsx)(u.b,{path:"/dashboard",render:function(){return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Xe,{authUser:e.state.loggedUser}),e.state.logged?"":Object(re.jsx)(u.a,{to:"/"})]})}}),this.state.logged?"":Object(re.jsx)(u.a,{to:"/"}),Object(re.jsx)(u.b,{component:it})]})})})}}]),a}(s.Component);var dt={createUser:function(e){return{type:"CREATE_USER",payload:e}}},lt=Object(y.b)((function(e){return{loggedUser:e.loggedUser}}),dt)(ct),jt=a(325),ht={loggedUser:{email:"",token:""}};var pt=Object(jt.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TOKEN":var a={token:t.payload.token},s=Object.assign(e.loggedUser,a);return console.log("after update",s),{loggedUser:s};case"CREATE_USER":return{loggedUser:t.payload};default:return e}})),ut=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(re.jsx)(y.a,{store:pt,children:Object(re.jsx)(p.a,{children:Object(re.jsx)("div",{className:"App","data-testid":"tidApp",children:Object(re.jsx)(lt,{})})})})}}]),a}(r.a.Component),bt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,618)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),s(e),r(e),n(e),o(e)}))},gt=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_DOMAIN,mt=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_CLIENT_ID;o.a.render(Object(re.jsx)(Pe.a,{domain:gt,clientId:mt,redirectUri:window.location.origin,children:Object(re.jsx)(ut,{})}),document.getElementById("root")),bt()}},[[567,1,2]]]);
//# sourceMappingURL=main.772fc457.chunk.js.map